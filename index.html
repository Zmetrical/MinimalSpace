<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>MinimalSpace_TaskManagement</title>
    <link rel="stylesheet" href="style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap');
    </style>
</head>

<body>
    <div class="container">
        <div class="window">
            <h1>Task Management</h1>
        </div>
        <div class="tab">
            <div class="col-list">
                <div class="list-header-container">
                    <div class="list-header">
                        <h2 data-filter="pending">pending</h2>
                        <h2 data-filter="completed">completed</h2>
                        <h2 class="active" data-filter="all">all</h2>
                    </div>
                </div>
                <div class="list-container">
                </div>
                <div class="control">
                    <input type="text" id="titleTask" placeholder="Enter task title...">
                    <input type="button" id="addTask" value="Create">
                </div>
            </div>
            <div class="col-note">
                <div class="note-header">
                    <h2 id="noteTitle">Select a task to view details</h2>
                </div>
                <div class="note-container" id="noteContainer" contenteditable="false">
                    <p>Click on any task to view or edit its details here.</p>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    // Add your JavaScript here
const addButton = document.getElementById("addTask");
const addInput = document.getElementById("titleTask");
const listContainer = document.querySelector(".list-container");
const noteTitle = document.getElementById("noteTitle");
const noteContainer = document.getElementById("noteContainer");

let taskCounter = 1;
let currentFilter = 'all';
let selectedTask = null;

// Store task data
const taskData = new Map();

const listHeader = document.querySelectorAll(".list-header h2");

// Filter functionality
listHeader.forEach(btn => {
    btn.addEventListener('click', () => {
        const current = document.querySelector(".list-header h2.active");
        if (current) current.classList.remove("active");
        btn.classList.add("active");
        
        // Update current filter and apply it
        currentFilter = btn.getAttribute('data-filter');
        applyFilter();
    });
});

// Function to apply filter based on current selection
function applyFilter() {
    const allCards = document.querySelectorAll('.list-card');
    
    allCards.forEach(card => {
        const checkbox = card.querySelector('.checkbox');
        const isCompleted = checkbox.classList.contains('checked');
        
        switch(currentFilter) {
            case 'pending':
                card.style.display = isCompleted ? 'none' : 'flex';
                break;
            case 'completed':
                card.style.display = isCompleted ? 'flex' : 'none';
                break;
            case 'all':
            default:
                card.style.display = 'flex';
                break;
        }
    });
}

// Function to select a task and show its note
function selectTask(taskId, taskElement) {
    // Remove previous selection
    const previousSelected = document.querySelector('.list-card.selected');
    if (previousSelected) {
        previousSelected.classList.remove('selected');
    }
    
    // Add selection to current task
    taskElement.classList.add('selected');
    selectedTask = taskId;
    
    // Get task data
    const data = taskData.get(taskId);
    const taskTitle = taskElement.querySelector('h2').textContent;
    
    // Update note section
    noteTitle.textContent = taskTitle;
    noteContainer.innerHTML = data.note || '<p>No details added yet. Click here to add details.</p>';
    
    // Make note container editable
    noteContainer.contentEditable = true;
    noteContainer.style.cursor = 'text';
}

// Function to create a new task card
function createTaskCard(taskText) {
    const taskId = `task_${taskCounter}`;
    const card = document.createElement('div');
    card.className = 'list-card';
    card.setAttribute('data-task-id', taskId);
    card.innerHTML = `
        <h2>${taskText}</h2>
        <span class="checkbox"></span>
    `;
    
    // Initialize task data
    taskData.set(taskId, {
        title: taskText,
        note: '',
        completed: false
    });
    
    // Add click event to checkbox
    const checkbox = card.querySelector('.checkbox');
    checkbox.addEventListener('click', function(e) {
        e.stopPropagation();
        this.classList.toggle('checked');
        
        // Update task data
        const data = taskData.get(taskId);
        data.completed = this.classList.contains('checked');
        
        // Reapply filter after checkbox state changes
        applyFilter();
    });
    
    // Add click event to card (excluding checkbox)
    card.addEventListener('click', function(e) {
        if (!e.target.classList.contains('checkbox')) {
            selectTask(taskId, card);
        }
    });
    
    return card;
}

// Auto-save note content when it changes
noteContainer.addEventListener('input', () => {
    if (selectedTask) {
        const data = taskData.get(selectedTask);
        data.note = noteContainer.innerHTML;
    }
});

// Prevent losing focus when clicking in the note container
noteContainer.addEventListener('click', (e) => {
    e.stopPropagation();
});

// Add new task when button is clicked
addButton.addEventListener("click", () => {
    let taskText = addInput.value.trim();
    if (taskText) {
        const newCard = createTaskCard(taskText);
        listContainer.appendChild(newCard);
        addInput.value = ''; // Clear input after adding
        taskCounter++;
        // Apply current filter to new task
        applyFilter();
        
        // Auto-select the new task
        const taskId = newCard.getAttribute('data-task-id');
        selectTask(taskId, newCard);
    }
});

// Allow adding tasks with Enter key
addInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        addButton.click();
    }
});

// Initial state - make note container non-editable initially
noteContainer.contentEditable = false;
noteContainer.style.cursor = 'default';
</script>

</html>